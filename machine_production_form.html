<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Machine Production Form</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .form-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .header-fields {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        .header-fields div {
            display: flex;
            flex-direction: column;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        th {
            background-color: #f2f2f2;
        }
        input[type="date"], input[type="text"], input[type="number"] {
            padding: 8px;
            width: 100%;
            box-sizing: border-box;
        }
        input[readonly] {
            background-color: #f5f5f5;
        }
        button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>
    <div class="form-container">
        <h1>Machine Production Form</h1>
        
        <div class="header-fields">
            <div>
                <label for="date">Date:</label>
                <input type="date" id="date" name="date" required>
            </div>
            <div>
                <label for="name">Name:</label>
                <input type="text" id="name" name="name" required>
            </div>
        </div>

        <table id="machineTable">
            <thead>
                <tr>
                    <th>Machine Name</th>
                    <th>Day Number</th>
                    <th>Night Number</th>
                    <th>Total</th>
                </tr>
            </thead>
            <tbody>
                <!-- Your table rows here (same as in your original HTML) -->
                <!-- For brevity, I've included just a few rows in this example -->
                <tr>
                    <td>STENTER-10</td>
                    <td><input type="number" name="STENTER-10Day" value="0" class="day-input"></td>
                    <td><input type="number" name="STENTER-10Night" value="0" class="night-input"></td>
                    <td><input type="number" name="STENTER-10Total" value="0" class="total-input" readonly></td>
                </tr>
                <tr>
                    <td>STENTER-20</td>
                    <td><input type="number" name="STENTER-20Day" value="0" class="day-input"></td>
                    <td><input type="number" name="STENTER-20Night" value="0" class="night-input"></td>
                    <td><input type="number" name="STENTER-20Total" value="0" class="total-input" readonly></td>
                </tr>
                <tr>
                    <td>STENTER-30</td>
                    <td><input type="number" name="STENTER-30Day" value="0" class="day-input"></td>
                    <td><input type="number" name="STENTER-30Night" value="0" class="night-input"></td>
                    <td><input type="number" name="STENTER-30Total" value="0" class="total-input" readonly></td>
                </tr>
                <!-- Add all your other machine rows here -->
            </tbody>
        </table>

        <button id="submitBtn">Submit Data</button>
        <div id="statusMessage"></div>
    </div>

    <script>
        // Auto-calculate totals when day or night values change
        document.addEventListener('DOMContentLoaded', function() {
            // Add event listeners to all day and night inputs
            const dayInputs = document.querySelectorAll('.day-input');
            const nightInputs = document.querySelectorAll('.night-input');
            
            dayInputs.forEach(input => {
                input.addEventListener('input', calculateTotal);
            });
            
            nightInputs.forEach(input => {
                input.addEventListener('input', calculateTotal);
            });
            
            function calculateTotal(e) {
                const row = e.target.closest('tr');
                const dayInput = row.querySelector('.day-input');
                const nightInput = row.querySelector('.night-input');
                const totalInput = row.querySelector('.total-input');
                
                const dayValue = parseFloat(dayInput.value) || 0;
                const nightValue = parseFloat(nightInput.value) || 0;
                
                totalInput.value = dayValue + nightValue;
            }
            
            // Submit button handler
            document.getElementById('submitBtn').addEventListener('click', submitForm);
        });
        
        function submitForm() {
            const date = document.getElementById('date').value;
            const name = document.getElementById('name').value;
            
            if (!date || !name) {
                alert('Please fill in all required fields (Date and Name)');
                return;
            }
            
            // Collect all machine data
            const machineData = [];
            const rows = document.querySelectorAll('#machineTable tbody tr');
            
            rows.forEach(row => {
                const machineName = row.cells[0].textContent.trim();
                const dayInput = row.querySelector('.day-input');
                const nightInput = row.querySelector('.night-input');
                const totalInput = row.querySelector('.total-input');
                
                machineData.push({
                    machineName: machineName,
                    day: dayInput.value,
                    night: nightInput.value,
                    total: totalInput.value
                });
            });
            
            // Prepare the complete data object
            const formData = {
                date: date,
                name: name,
                machines: machineData
            };
            
            // Here you would send the data to your backend or Google Sheets
            // For now, we'll just log it and show a success message
            console.log('Form data:', formData);
            
            // Call the function to save to Google Sheets
            saveToGoogleSheets(formData);
        }
        
        function saveToGoogleSheets(formData) {
            const statusMessage = document.getElementById('statusMessage');
            statusMessage.textContent = "Saving data...";
            statusMessage.style.color = "blue";
            
            // Replace with your Google Apps Script Web App URL
            const scriptUrl = "https://script.google.com/macros/s/AKfycbx4MG-qk-ioT_qPu4VAwOigbGNkTE25j8NXT8wnnp3vn7c4WoXcAmpyKb3jj_qaE2w8Mg/exec";
            
            fetch(scriptUrl, {
                method: "POST",
                mode: "no-cors",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify(formData)
            })
            .then(() => {
                statusMessage.textContent = "Data saved successfully!";
                statusMessage.style.color = "green";
                // Optionally reset the form
                document.getElementById('date').value = "";
                document.getElementById('name').value = "";
                
                // Reset all input fields
                const inputs = document.querySelectorAll('input[type="number"]');
                inputs.forEach(input => {
                    if (!input.readOnly) {
                        input.value = "0";
                    } else {
                        // For total fields
                        input.value = "0";
                    }
                });
            })
            .catch(error => {
                console.error("Error:", error);
                statusMessage.textContent = "Error saving data. Please try again.";
                statusMessage.style.color = "red";
            });
        }
    </script>
</body>
</html>
